WH.shared=function(){function q(a,c){var d=null,f=0,b=function(){f=0;d=null;a.apply()};return function(){var e=w(),g=c-(e-f);0>=g||g>c?(d&&(clearTimeout(d),d=null),f=e,a.apply()):d||(d=setTimeout(b,g))}}function r(){for(var a=!1,c=window.innerHeight||document.documentElement.clientHeight,d=0;d<k.length;d+=1){var f=k[d];if(!f.isLoaded){var b=f,e=b.element.getBoundingClientRect(),a=e.top,g=e.bottom;0==b.lastTop-e.top&&window.scrollY!=b.lastY&&(a-=window.scrollY,g-=window.scrollY);b.lastTop=e.top;b.lastY=
window.scrollY;var b=c,e=52,h=2*b,e=e-h,b=b+h;(a>=e&&a<=b||g>=e&&g<=b||a<=e&&g>=b)&&f.load();a=!0}}!a&&k.length&&window.removeEventListener("scroll",l)}function t(a){if(document.addEventListener&&a.finishedLoadingEvent){a.alt&&(a.element.alt=a.alt);var c=document.createElement("div");c.className="loader";for(var d=0;3>d;d++){var f=document.createElement("div");f.className="loader-dot";c.appendChild(f)}var b=document.createElement("div");b.className="loading-container";b.appendChild(c);a.element.parentElement.appendChild(b);
a.element.addEventListener(a.finishedLoadingEvent,function(){this.parentElement.removeChild(b)})}}function u(a){this.lastTop=a.getBoundingClientRect().top;this.lastY=window.scrollY;this.isVisible=this.isLoaded=!1;this.element=a;this.load=function(){}}function x(a){u.call(this,a);this.alt=a.alt;a.alt="";this.finishedLoadingEvent="load";this.src=a.getAttribute("data-src");m&&this.src&&"jpg"==this.src.split(".").pop()&&this.src.match(/images(_[a-z]{2})?\/thumb\//)&&!this.src.match(/(\.[a-zA-Z]+){2}$/)&&
(this.src+=".webp");this.load=function(){this.element.setAttribute("src",this.src);this.isLoaded=!0;t(this)}}function y(a){u.call(this,a);this.finishedLoadingEvent="loadeddata";this.isPlaying=!1;this.src=n+this.element.getAttribute("data-src");(this.poster=this.element.getAttribute("data-poster"))&&"jpg"==this.poster.split(".").pop()&&m&&(this.poster+=".webp");this.noAutoplay=this.element.getAttribute("data-noautoplay");this.play=function(){this.element.play();this.isPlaying=!0};this.pause=function(){this.element.pause();
this.isPlaying=!1};this.load=function(){this.element.setAttribute("poster",this.poster);!p||this.noAutoplay||0!=window.WH.isMobile&&!0!==window.wgIsMainPage?this.finishedLoadingEvent=null:(this.element.setAttribute("src",this.src),this.play());this.isLoaded=!0;this.noAutoplay||t(this)}}var k=[],l,p,v=!1,w=Date.now||function(){return(new Date).getTime()},h=navigator.userAgent,m=h.match(/Linux/)&&h.match(/Android/)||h.match(/Opera/)||h.match(/Chrome/)&&!h.match(/Edge/),n="http://vid1.whstatic.com";
"https:"===window.location.protocol&&(n="//d5kh2btv85w9n.cloudfront.net");p=function(){var a=window.document.createElement("video");a.setAttribute("muted","");a.setAttribute("playsinline","");a.setAttribute("webkit-playsinline","");a.muted=!0;a.playsinline=!0;a.webkitPlaysinline=!0;a.setAttribute("height","0");a.setAttribute("width","0");a.style.position="fixed";a.style.top=0;a.style.width=0;a.style.height=0;a.style.opacity=0;try{var c=a.play();c&&c["catch"]&&c.then(function(){})["catch"](function(){})}catch(d){}return!a.paused}();
l=q(r,500);window.addEventListener?window.addEventListener("scroll",l):v=!0;return{throttle:q,TOP_MENU_HEIGHT:52,autoPlayVideo:p,webpSupport:m,addScrollLoadItem:function(a){a=document.getElementById(a);var c=null;"img"===a.nodeName.toLowerCase()?c=new x(a):"video"===a.nodeName.toLowerCase()&&(c=new y(a));c&&k.push(c);var d=a.getAttribute("data-width")||a.getAttribute("width"),f=a.getAttribute("data-height")||a.getAttribute("height");0<d&&(a.parentElement.style.paddingTop=f/d*100+"%");r();v&&c.load()},
videoRoot:n}}();
