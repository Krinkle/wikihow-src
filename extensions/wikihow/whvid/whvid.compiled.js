WH.video=function(){function g(a){var b=a.isVisible,c=window.innerHeight||document.documentElement.clientHeight,d=a.element.getBoundingClientRect();if(h(d,c,!1)){var n=100*m(d,c);a.isVisible=75<=n}else a.isVisible=!1;0==a.isLoaded&&h(d,c,!0)&&a.load();a.isVisible!=b&&a.autoplay&&(1==a.isVisible&&0==a.isPlaying?a.play():1==a.isPlaying&&a.pause())}function m(a,b){if(0==a.height)return 0;if(80>a.top&&a.bottom>b)return 1;if(80<a.top&&a.top<b)return a.bottom<b?1:(b-a.top)/a.height;if(80<a.bottom)return(a.bottom-
80)/a.height}function p(){for(var a=0;a<e.length;a++)g(e[a])}function h(a,b,c){var d=80;if(0==a.height)return!1;c&&(c=.2*b,d=0-c,b+=c);return a.top>=d&&a.top<=b||a.bottom>=d&&a.bottom<=b?!0:!1}function q(a){a.playButton&&(a.playButton.addEventListener("click",function(){a.toggle()}),a.summaryVideo&&"onloadstart"in window?a.element.addEventListener("loadstart",function(){setTimeout(function(){a.isPlaying||(a.playButton.style.visibility="visible")},200)}):a.playButton.style.visibility="visible");a.summaryOutro&&
a.element.addEventListener("ended",function(){a.element.load()});a.element.addEventListener("play",function(){a.playButton&&(a.playButton.style.visibility="hidden");a.summaryOutro&&(a.element.poster=a.summaryOutro)});a.element.addEventListener("pause",function(){a.playButton&&(a.playButton.style.visibility="visible")});a.seek&&(a.seek.addEventListener("change",function(){a.element.currentTime=a.seek.value/100*a.element.duration}),a.element.addEventListener("timeupdate",function(){a.seek.value=100/
a.element.duration*a.element.currentTime}),a.seek.addEventListener("mousedown",function(){a.pause()}),a.seek.addEventListener("mouseup",function(){a.play()}));a.volumeBar&&a.volumeBar.addEventListener("change",function(){a.volume=volumeBar.value})}function r(a){this.pausedQueued=this.isPlaying=this.isVisible=this.isLoaded=!1;this.element=a;this.summaryVideo=!1;this.controls=null;this.poster=this.element.getAttribute("data-poster");this.summaryOutro=this.element.getAttribute("data-summary-outro");
this.poster&&"jpg"==this.poster.split(".").pop()&&WH.shared.webpSupport&&(this.poster+=".webp");this.summaryVideo=1==this.element.getAttribute("data-summary");this.autoplay=!this.summaryVideo;for(a=0;a<this.element.parentNode.children.length;a++){var b=this.element.parentNode.children[a];if("m-video-controls"==b.className)for(this.controls=b,b=0;b<this.controls.children.length;b++){var c=this.controls.children[b];"m-video-play"==c.className?this.playButton=c:"m-video-play-old"==c.className?this.playButton=
c:"m-video-seek"==c.className?this.seek=c:"m-video-volume"==c.className&&(this.volumeBar=c)}}this.play=function(){var a=this;this.playPromise=this.element.play();void 0!==this.playPromise?this.playPromise.then(function(b){a.isPlaying=!0})["catch"](function(){}):this.isPlaying=!0;this.summaryVideo&&this.element.setAttribute("controls","true")};this.pause=function(){var a=this;void 0===this.playPromise||this.pausedQueued?(this.element.pause(),this.pausedQueued=this.isPlaying=!1):(this.pausedQueued=
!0,this.playPromise.then(function(b){a.element.pause();a.pausedQueued=!1;a.isPlaying=!1})["catch"](function(){}))};this.toggle=function(){this.isLoaded||(this.load(),this.summaryVideo&&this.element.removeAttribute("muted"));this.isPlaying?this.pause():this.play()};this.load=function(){var a=k+this.element.getAttribute("data-src");this.element.setAttribute("src",a);this.element.setAttribute("poster",this.poster);this.isLoaded=!0};var d=this;this.element.addEventListener("click",function(){d.toggle()});
this.controls&&q(d)}function t(a){this.isPlaying=this.isVisible=this.isLoaded=!1;this.gifSrc=a.getAttribute("data-gifsrc");this.gifFirstSrc=a.getAttribute("data-giffirstsrc");this.play=function(){this.element.setAttribute("src",this.gifSrc);this.isPlaying=!0};this.pause=function(){};this.load=function(){(new Image).src=this.gifSrc;this.isLoaded=!0};a.parentNode.parentNode.style.minHeight=a.offsetHeight+"px";var b=window.document.createElement("img");b.setAttribute("class","whvgif whcdn");b.setAttribute("src",
a.getAttribute("data-giffirstsrc"));a.parentNode.replaceChild(b,a);this.element=b}var e=[],f=!1,k="http://vid1.whstatic.com",l=!1;return{start:function(){WH.shared&&(f=WH.shared.autoPlayVideo);"undefined"==typeof document.createElement("video").canPlayType&&(l=!1);0<window.location.href.indexOf("gif=1")&&(f=!1);"https:"===window.location.protocol&&(k="//d5kh2btv85w9n.cloudfront.net");WH.shared&&window.addEventListener("scroll",WH.shared.throttle(p,100))},add:function(a){var b=1==a.getAttribute("data-summary");
if(l){var b="img-"+a.id,c=a.getAttribute("poster");a.parentElement.innerHTML="<img id='"+b+"' src='"+c+"'></img>"}else a=f||b?new r(a):new t(a),e.push(a),g(a)}}}();WH.video.start();
